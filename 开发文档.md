# BookStore 书店管理系统

>*ACM-Class-2023 张博涵*

## 程序功能概述

**本书店管理系统以命令行操作为交互方式，是一款具有帐户管理功能、图书管理功能和日志管理功能的综合性管理系统。**

- **帐户管理功能**

  - 支持使用者对帐户进行注册、登录、注销、修改密码的基本操作；
  - 支持管理员对帐户进行创建、删除的操作；
  - 支持用户级别划分，级别越高，权限越高，共有超级管理员（权限级别为{7}）、管理员（权限级别为{3}）、顾客（权限级别为{1}）、游客四种用户级别（权限级别为{0}）。

- **图书管理功能**

  - 支持使用者进行图书信息查询、图书购买的基本操作，其中图书信息查询支持ISBN号、关键字、书名、作者名搜索，但只支持单次单个信息搜索；
  - 支持管理员选中图书、修改图书信息和记录图书进货信息。

- **日志管理系统**
  
  - 支持日志信息查询，包括：
    - 财务记录查询：输出一段时间内的收支；
    - 生成财务报表：按时间顺序输出每笔交易和进货的ISBN号、数量、收入\支出；
    - 生成员工工作情况报告：按员工帐户ID升序输出每名员工工作过程中执行的所有操作（按时间排序）；
    - 生成日志：按时间顺序输出系统运行期间所有操作的用户、操作类别、操作对象。

- **其他功能**

  - 支持指令合法性检查，操作失败时输出`Invalid\n`；
  - 支持文件读写功能，可以长时间保存书店管理信息，系统重启后数据不会清空。

## 主体逻辑说明

- **初始化**

  - 首次启动系统时初始化，新建存储文件与超级管理员帐户；

- **帐户操作**

  - 以一个抽象基类及其派生类实现当前帐户的各种操作，各个派生类包含可执行操作的成员函数，基类记录帐户基本信息及其权限级别，并且低权限用户类是作为高权限用户类的基类，而不是所有派生类都以根类为基类，从而实现高权限用户类可以执行低权限指令；
  - 高级用户登录低级用户时的`log`函数需重载为无需密码和输入密码均可；

- **图书管理**

  - 图书信息以结构体的方式记录，包括ISBN号、书名、作者名、关键字、单价、库存数量；
  - 图书交易管理：进货会增加库存量并记录进货信息，购买图书会减少库存量并记录购买信息，这些信息均记录于日志的财务记录中而不是图书结构体中；

- **日志管理**

  - 分类别记录

    - 总工作日志，以时间为序标号存储，存储操作用户、操作类别、操作对象，输出时先输出时间序号，再输出后续信息；
    - 财务记录：以时间为序标号存储，存储交易类别（进货\购买）、交易数量、交易金额，并记录该次交易完成后的总收入与总支出，输出财务报表时同总工作日志，财务记录查询时仅需读取第一条和最后一条交易记录，输出两条交易记录所记载的总收入和总支出的差即可；
    - 员工工作情况记录：以员工ID、时间的优先级升序排序存储，存储员工ID、操作类别、操作对象，输出时同总工作日志。

- **文件存储**

  - **算法：块状链表**
  - 文件组成：

    - 帐户信息库

      - 两个文件：索引文件与块文件；
      - 记录帐户类信息（用户ID、密码、用户名、权限级别），按用户ID的ASCII码升序排序，每一块的索引为这一块的第一个元素的用户ID；

    - 图书信息库

      - 两个文件：索引文件与块文件；
      - 记录图书信息（ISBN号、书名、作者名、关键字），按ISBN号升序排序，每一块的索引为这一块第一个元素的ISBN号；
      - 关键字直接以输入的`"keyword1|keyword2|keyword3|+"`的格式存储，合法性检查时检查去掉`'|'`的字符串的长度是否在60字节以内；

    - 日志信息库

      - 总工作日志文件；
      - 财务记录文件；
      - 员工工作情况记录文件；
      - 均采用块状链表存储，在**日志管理**中已经说明；

## 代码文件结构

## 类接口说明

## 文件存储说明

## 其他补充说明
